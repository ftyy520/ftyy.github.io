<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä»æŒ‡å—å¼€å§‹ã®åå °ä¸€ä¸­ç”Ÿæ´»</title>
  <style>
    :root {
      --primary: #2c5aa0;   /* æ ¡å¾½è“ */
      --accent: #f5c32c;    /* é“¶æé»„ */
      --light: #f8f9fa;
      --dark: #1a365d;
      --glass-bg: rgba(255, 255, 255, 0.85);
      --shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
      --transition: all 0.3s ease;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%);
      min-height: 100vh;
      padding: 60px 20px 80px;
      position: relative;
      overflow-x: hidden;
    }
    
    /* ç»ç’ƒæ€å¡ç‰‡ */
    .glass-card {
      background: var(--glass-bg);
      backdrop-filter: blur(12px);
      border-radius: 16px;
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.18);
    }
    
    /* é¡¶éƒ¨å¯¼èˆª */
    .global-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: var(--glass-bg);
      box-shadow: var(--shadow);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      z-index: 1000;
    }
    .logo {
      font-weight: 700;
      font-size: 1.2rem;
      color: var(--primary);
      text-decoration: none;
    }
    .breadcrumb {
      margin-left: 15px;
      font-size: 0.9rem;
      color: #666;
    }
    #sidebarToggle {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      margin-right: 10px;
    }
    
    /* å…¨å±€æœç´¢ */
    .global-search {
      margin-left: auto;
      position: relative;
    }
    .global-search input {
      padding: 8px 12px;
      border-radius: 20px;
      border: 1px solid #ddd;
      width: 200px;
    }
    .suggestions-box {
      position: absolute;
      top: 40px;
      left: 0;
      width: 300px;
      max-height: 300px;
      overflow-y: auto;
      display: none;
    }
    
    /* å†…å®¹åŒºåŸŸ */
    .content-section {
      position: absolute;
      width: 100%;
      padding: 20px;
      opacity: 0;
      transform: translateY(20px);
      transition: var(--transition);
      pointer-events: none;
    }
    .content-section.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: all;
    }
    
    /* é¦–é¡µæ ·å¼ */
    #home {
      text-align: center;
      padding-top: 40px;
    }
    #home h1 {
      font-size: 2.2rem;
      color: var(--dark);
      margin-bottom: 20px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    #home p {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 40px;
    }
    
    /* æŒ‰é’®ç½‘æ ¼ */
    .button-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }
    .nav-button {
      background: white;
      border: none;
      border-radius: 12px;
      padding: 20px 15px;
      box-shadow: var(--shadow);
      transition: var(--transition);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      min-height: 150px;
      justify-content: center;
    }
    .nav-button:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.1);
    }
    .nav-button img {
      width: 50px;
      height: 50px;
      margin-bottom: 15px;
      object-fit: contain;
    }
    .nav-button span {
      font-weight: 600;
      font-size: 1.1rem;
      color: var(--dark);
    }
    
    /* ä¾§è¾¹ç›®å½• */
    #sidebar {
      position: fixed;
      top: 0;
      left: -300px;
      width: 280px;
      height: 100vh;
      background: var(--glass-bg);
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
      z-index: 1001;
      transition: var(--transition);
      padding: 70px 20px 20px;
      overflow-y: auto;
    }
    #sidebar.active {
      left: 0;
    }
    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    .chapter-tree details {
      margin-bottom: 10px;
    }
    .chapter-tree summary {
      font-weight: 600;
      padding: 10px;
      cursor: pointer;
      background: #f5f7fa;
      border-radius: 8px;
    }
    .chapter-tree a {
      display: block;
      padding: 8px 15px;
      text-decoration: none;
      color: #333;
      transition: var(--transition);
      border-left: 3px solid transparent;
    }
    .chapter-tree a:hover {
      color: var(--primary);
      border-left: 3px solid var(--accent);
      background: #f0f9ff;
    }
    
    /* å†…å®¹ç¼–è¾‘åŒº */
    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--accent);
    }
    .editable-area {
      min-height: 400px;
      padding: 20px;
      border-radius: 10px;
      background: white;
      box-shadow: var(--shadow);
      margin-top: 20px;
      border: 1px dashed #d1e7ff;
    }
    
    /* æ ¡å›­åœ°å›¾æ¨¡å— */
    #map-container {
      height: 500px;
      border-radius: 12px;
      overflow: hidden;
      margin-top: 20px;
    }
    .map-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    .map-controls button {
      padding: 8px 15px;
      border-radius: 20px;
      background: var(--primary);
      color: white;
      border: none;
      cursor: pointer;
    }
    
    /* è¯„è®ºåŒº */
    .comment-section {
      margin-top: 30px;
    }
    .comment-editor {
      padding: 15px;
      margin-bottom: 20px;
    }
    .comment-editor textarea {
      width: 100%;
      height: 80px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ddd;
      resize: none;
    }
    .editor-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 10px;
    }
    .comment-list {
      max-height: 400px;
      overflow-y: auto;
    }
    .comment-item {
      display: flex;
      gap: 15px;
      padding: 15px;
      border-bottom: 1px solid #eee;
    }
    .comment-item .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
    }
    .comment-body {
      flex: 1;
    }
    .comment-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 5px;
    }
    .badge.teacher {
      background: var(--accent);
      color: #333;
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 0.8rem;
    }
    
    /* åº•éƒ¨å¯¼èˆª */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: var(--glass-bg);
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
      padding: 10px;
      display: flex;
      justify-content: space-around;
      z-index: 999;
    }
    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 8px 15px;
      border-radius: 50px;
      transition: var(--transition);
      cursor: pointer;
    }
    .nav-item.active {
      background: #f0f9ff;
    }
    .nav-item img {
      width: 24px;
      height: 24px;
      margin-bottom: 5px;
    }
    .nav-item span {
      font-size: 0.8rem;
      color: #555;
    }
    
    /* å“åº”å¼ä¼˜åŒ– */
    @media (max-width: 768px) {
      .button-grid {
        grid-template-columns: 1fr;
      }
      .content-section {
        padding: 15px;
      }
      #home h1 {
        font-size: 1.8rem;
      }
      .nav-button {
        min-height: 120px;
        padding: 15px 10px;
      }
      #map-container {
        height: 300px;
      }
    }
    @media (max-width: 480px) {
      .bottom-nav .nav-item span {
        display: none;
      }
      .nav-item {
        padding: 10px;
      }
      .global-search input {
        width: 120px;
      }
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <header class="global-header glass-card">
    <button id="sidebarToggle">â˜°</button>
    <a href="#home" class="logo">åå °ä¸€ä¸­æŒ‡å—</a>
    <div class="breadcrumb">
      <span>å½“å‰ä½ç½®ï¼š</span>
      <a href="#home">é¦–é¡µ</a> > <span id="current-chapter">æ€»ä½“ä»‹ç»</span>
    </div>
    <!-- å…¨å±€æœç´¢ -->
    <div class="global-search">
      <input type="text" placeholder="æœç´¢æŒ‡å—å†…å®¹..." id="globalSearch">
      <div class="suggestions-box glass-card">
        <div class="suggestion-item" data-type="chapter">
          <span>ç¬¬ä¸€ç« ï¼šæ ¡å›­ç”Ÿæ´»æŒ‡å—</span>
          <small>å®¿èˆç®¡ç† Â· é£Ÿå ‚æ”»ç•¥</small>
        </div>
        <div class="suggestion-item" data-type="location">
          <span>å›¾ä¹¦é¦†ä½ç½®</span>
          <small>æ ¡å›­åœ°å›¾æ¨¡å—</small>
        </div>
      </div>
    </div>
  </header>
  
  <!-- ä¾§è¾¹ç›®å½• -->
  <div id="sidebar" class="glass-card">
    <div class="sidebar-header">
      <h3>ç›®å½•å¯¼èˆª</h3>
      <button id="closeSidebar">âœ•</button>
    </div>
    <div class="chapter-tree">
      <details open>
        <summary>æ ¡å›­ç”Ÿæ´»æŒ‡å—</summary>
        <a href="#" data-chapter="1">æ ¡å›­æ¦‚å†µ</a>
        <a href="#" data-chapter="1">å®¿èˆç®¡ç†</a>
        <a href="#" data-chapter="1">é£Ÿå ‚æ”»ç•¥</a>
      </details>
      <details>
        <summary>å­¦ä¹ èµ„æºå¯¼èˆª</summary>
        <a href="#" data-chapter="2">å›¾ä¹¦é¦†æŒ‡å—</a>
        <a href="#" data-chapter="2">å®éªŒå®¤ä½¿ç”¨</a>
        <a href="#" data-chapter="2">è‡ªä¹ å®¤åˆ†å¸ƒ</a>
      </details>
      <details>
        <summary>æ ¡å›­æ–‡åŒ–</summary>
        <a href="#" data-chapter="3">ç¤¾å›¢æ´»åŠ¨</a>
        <a href="#" data-chapter="3">ä¼ ç»ŸèŠ‚æ—¥</a>
        <a href="#" data-chapter="3">æ ¡å²é•¿å»Š</a>
      </details>
    </div>
  </div>
  
  <!-- é¦–é¡µå†…å®¹ -->
  <div id="home" class="content-section active">
    <h1>ä»æŒ‡å—å¼€å§‹ã®åå °ä¸€ä¸­ç”Ÿæ´»</h1>
    <p>æ«ç³–æ‚ æ‚ åˆ¶ä½œ</p>
    <div class="button-grid">
      <button class="nav-button glass-card" onclick="showSection('overview')">
        <img src="assets/icons/intro-icon.png" alt="æ€»ä½“ä»‹ç»">
        <span>æ€»ä½“ä»‹ç»ä¸æ¦‚è§ˆ</span>
      </button>
      <button class="nav-button glass-card" onclick="showSection('toc')">
        <img src="assets/icons/toc-icon.png" alt="ç›®å½•">
        <span>ç›®å½•</span>
      </button>
      <button class="nav-button glass-card" onclick="showSection('map')">
        <img src="assets/icons/map-icon.png" alt="åœ°å›¾">
        <span>æ ¡å›­åœ°å›¾å¯¼èˆª</span>
      </button>
      <button class="nav-button glass-card" onclick="loadChapter(1)">
        <img src="assets/icons/start-icon.png" alt="å¼€å§‹">
        <span>ä»æŒ‡å—å¼€å§‹ï¼Œäº†è§£ä¸€ä¸­å§ï¼</span>
      </button>
      <button class="nav-button glass-card" onclick="showSection('credits')">
        <img src="assets/icons/credits-icon.png" alt="é¸£è°¢">
        <span>åˆ¶ä½œä¸é¸£è°¢</span>
      </button>
    </div>
  </div>
  
  <!-- æ€»ä½“ä»‹ç» -->
  <div id="overview" class="content-section">
    <div class="content-header">
      <h2>æ€»ä½“ä»‹ç»ä¸æ¦‚è§ˆ</h2>
      <button onclick="showSection('home')">â† è¿”å›</button>
    </div>
    <div class="editable-area glass-card" contenteditable="true">
      <h3>åå °å¸‚ç¬¬ä¸€ä¸­å­¦ç®€ä»‹</h3>
      <p>åå °ä¸€ä¸­åˆ›å»ºäº1973å¹´ï¼Œæ˜¯æ¹–åŒ—çœé¦–æ‰¹é‡ç‚¹ä¸­å­¦å’Œçœçº§ç¤ºèŒƒé«˜ä¸­ã€‚å­¦æ ¡ä½äºåå °å¸‚ä¸­å¿ƒåŸåŒºï¼Œå åœ°253äº©ï¼Œå»ºç­‘é¢ç§¯99851å¹³æ–¹ç±³ï¼Œç°æœ‰75ä¸ªæ•™å­¦ç­ï¼Œ4600ä½™åå­¦ç”Ÿã€‚</p>
      
      <h3>åŠå­¦ç‰¹è‰²</h3>
      <p>ç§‰æ‰¿"è‚²äººä¸ºæœ¬ï¼Œå¾·è‚²ä¸ºå…ˆï¼Œå¸ˆç”Ÿå…±è¿›ï¼Œå…¨é¢å‘å±•"çš„åŠå­¦ç†å¿µï¼Œç€åŠ›æ‰“é€ "ä½è¿›é«˜å‡ºã€é«˜è¿›ä¼˜å‡ºã€ä¼˜è¿›ç‰¹å‡ºã€å¤šå…ƒå‘å±•"äººæ‰åŸ¹å…»çš„å“ç‰Œé«˜åœ°ã€‚å°é—­å¼ç®¡ç†ï¼Œå¼€æ”¾å¼æ•™è‚²ï¼Œæˆä¸ºåå °ä¸€ä¸­çš„é²œæ˜ç‰¹è‰²ã€‚</p>
      
      <h3>æ ¡è®­</h3>
      <p style="font-size: 1.2rem; color: var(--primary); font-weight: bold;">æ–‡æ˜å‹¤å¥‹ Â· æ±‚å®è¿›å–</p>
      
      <h3>æ•™å­¦æˆæœ</h3>
      <p>2022å¹´é«˜è€ƒå‡å­¦ç‡ä¿æŒåœ¨90%ä»¥ä¸Šï¼Œåœ¨åå °å¸‚é«˜ä¸­å­¦æ ¡ä¸­ååˆ—å‰èŒ…ã€‚ä»…2003å¹´è‡³2006å¹´å››å¹´é—´ï¼Œå­¦æ ¡å°±åŸ¹å…»å‡º5ä¸ªå…¨å¸‚é«˜è€ƒçŠ¶å…ƒã€‚</p>
    </div>
  </div>
  
  <!-- ç›®å½•é¡µ -->
  <div id="toc" class="content-section">
    <div class="content-header">
      <h2>æŒ‡å—ç›®å½•</h2>
      <button onclick="showSection('home')">â† è¿”å›</button>
    </div>
    <div id="chapter-buttons" class="button-grid"></div>
  </div>
  
  <!-- æ ¡å›­åœ°å›¾ -->
  <div id="map" class="content-section">
    <div class="content-header">
      <h2>æ ¡å›­å…¨æ™¯å¯¼èˆª</h2>
      <button onclick="showSection('home')">â† è¿”å›</button>
    </div>
    <div class="map-controls">
      <div class="search-box">
        <input type="text" id="mapSearch" placeholder="æœç´¢æ•™å­¦æ¥¼ã€é£Ÿå ‚ã€å®éªŒå®¤...">
        <button onclick="searchLocation()"><img src="assets/icons/search-icon.svg"></button>
      </div>
      <div class="map-layers">
        <button data-layer="default">å¸¸è§„åœ°å›¾</button>
        <button data-layer="satellite">å«æ˜Ÿè§†å›¾</button>
        <button data-layer="ar" onclick="activateAR()">ARå¯¼èˆª</button>
      </div>
    </div>
    <div id="map-container"></div>
    <div class="location-card glass-card">
      <h3 id="location-name">å›¾ä¹¦é¦†</h3>
      <p>å¼€æ”¾æ—¶é—´ï¼š8:00-22:00</p>
      <button onclick="planRoute()">è·¯çº¿è§„åˆ’</button>
    </div>
  </div>
  
  <!-- ç« èŠ‚å†…å®¹ -->
  <div id="chapter-container" class="content-section">
    <div class="content-header">
      <h2 id="chapter-title">ç¬¬ä¸€ç« ï¼šæ ¡å›­ç”Ÿæ´»æŒ‡å—</h2>
      <button onclick="showSection('toc')">â† è¿”å›ç›®å½•</button>
    </div>
    <div id="chapter-content" class="editable-area glass-card" contenteditable="true">
      <!-- å†…å®¹é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
    </div>
    
    <!-- è¯„è®ºåŒº -->
    <div class="comment-section glass-card">
      <h3>æ ¡å‹äº¤æµåŒº <span>(286æ¡)</span></h3>
      <div class="comment-editor">
        <textarea placeholder="åˆ†äº«ä½ çš„æ ¡å›­ç»éªŒ..."></textarea>
        <div class="editor-actions">
          <button class="emoji-picker">ğŸ˜Š</button>
          <button class="submit">å‘å¸ƒè¯„è®º</button>
        </div>
      </div>
      <div class="comment-list">
        <div class="comment-item">
          <img src="assets/avatars/user1.jpg" class="avatar">
          <div class="comment-body">
            <div class="comment-header">
              <strong>ææ ¡å‹</strong>
              <span>2å°æ—¶å‰</span>
              <button class="like-btn">â™¥ 42</button>
            </div>
            <p>é£Ÿå ‚äºŒæ¥¼çš„ç‰›è‚‰é¢ç»å¯¹æ˜¯éšè—ç¾é£Ÿï¼æ¯•ä¸šä¸‰å¹´ä»å¿µå¿µä¸å¿˜...</p>
          </div>
        </div>
        <div class="comment-item">
          <img src="assets/avatars/teacher1.jpg" class="avatar">
          <div class="comment-body">
            <div class="comment-header">
              <strong>å¼ è€å¸ˆ</strong>
              <span class="badge teacher">æ•™å¸ˆè®¤è¯</span>
              <span>1å°æ—¶å‰</span>
              <button class="like-btn">â™¥ 8</button>
            </div>
            <p>ç¡®å®ï¼Œæ¯å¤©é™é‡50ç¢—è¦æ—©å»æ’é˜Ÿï¼Œå»ºè®®11:30å‰åˆ°é£Ÿå ‚</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- åˆ¶ä½œé¸£è°¢ -->
  <div id="credits" class="content-section">
    <div class="content-header">
      <h2>åˆ¶ä½œä¸é¸£è°¢</h2>
      <button onclick="showSection('home')">â† è¿”å›</button>
    </div>
    <div class="editable-area glass-card" contenteditable="true">
      <h3>åˆ¶ä½œå›¢é˜Ÿ</h3>
      <p>æœ¬æŒ‡å—ç”±åå °ä¸€ä¸­å­¦ç”Ÿç¤¾å›¢"æ«ç³–æ‚ æ‚ "ç‹¬ç«‹å¼€å‘åˆ¶ä½œï¼Œæ—¨åœ¨å¸®åŠ©æ–°ç”Ÿå¿«é€Ÿé€‚åº”æ ¡å›­ç”Ÿæ´»ã€‚</p>
      
      <h3>ç‰¹åˆ«é¸£è°¢</h3>
      <ul>
        <li>åå °ä¸€ä¸­æ ¡æ–¹æä¾›çš„ä¿¡æ¯æ”¯æŒ</li>
        <li>çŸ³å½¬è€å¸ˆï¼ˆè‹±è¯­ç‰¹çº§æ•™å¸ˆï¼‰æä¾›çš„æ ¡å²èµ„æ–™</li>
        <li>å­™ç¦èƒœè€å¸ˆï¼ˆåœ°ç†é«˜çº§æ•™å¸ˆï¼‰çš„æ ¡å›­åœ°ç†æŒ‡å¯¼</li>
      </ul>
      
      <h3>æ•°æ®æ¥æº</h3>
      <p>åå °ä¸€ä¸­å®˜æ–¹ç½‘ç«™ï¼š<a href="http://www.syyz.net" target="_blank">www.syyz.net</a></p>
    </div>
  </div>
  
  <!-- åº•éƒ¨å¯¼èˆª -->
  <div class="bottom-nav glass-card">
    <div class="nav-item active" onclick="showSection('home')">
      <img src="assets/icons/home-icon.png" alt="é¦–é¡µ">
      <span>é¦–é¡µ</span>
    </div>
    <div class="nav-item" onclick="showSection('overview')">
      <img src="assets/icons/info-icon.png" alt="æ¦‚è§ˆ">
      <span>æ¦‚è§ˆ</span>
    </div>
    <div class="nav-item" onclick="showSection('toc')">
      <img src="assets/icons/book-icon.png" alt="ç›®å½•">
      <span>ç›®å½•</span>
    </div>
    <div class="nav-item" onclick="showSection('map')">
      <img src="assets/icons/map-icon.png" alt="åœ°å›¾">
      <span>åœ°å›¾</span>
    </div>
    <div class="nav-item" onclick="showSection('credits')">
      <img src="assets/icons/thanks-icon.png" alt="é¸£è°¢">
      <span>é¸£è°¢</span>
    </div>
  </div>

  <script>
    // ç« èŠ‚æ•°æ®ï¼ˆå¯æ‰©å±•ï¼‰
    const chapters = [
      {
        id: 1,
        title: "æ ¡å›­ç”Ÿæ´»æŒ‡å—",
        sections: [
          {
            title: "æ ¡å›­æ¦‚å†µ",
            content: `<h3>æ ¡å›­å¸ƒå±€</h3>
            <p>åå °ä¸€ä¸­ä½äºåå °å¸‚ä¸­å¿ƒåŸåŒºï¼Œåˆ†ä¸ºäº”å °åŒ—è¡—17å·ï¼ˆäººæ°‘è·¯æ ¡é—¨ï¼‰å’ŒåŒ—äº¬åŒ—è·¯78å·ï¼ˆåŒ—äº¬è·¯æ ¡é—¨ï¼‰ä¸¤ä¸ªæ ¡åŒºã€‚å­¦æ ¡æ‹¥æœ‰å››æ ‹æ•™å­¦æ¥¼ã€å…­æ ‹å­¦ç”Ÿå…¬å¯“ã€ç§‘æŠ€ä¿¡æ¯æ¥¼å’Œå®¤å†…ä½“è‚²é¦†ã€‚</p>
            <h3>è®¾æ–½é…å¤‡</h3>
            <ul>
              <li>æ•™å®¤é…å¤‡æ™ºæ…§é»‘æ¿ã€ç©ºè°ƒå’ŒæŠ•å½±ä»ª</li>
              <li>å®¿èˆé…å¤‡ç©ºè°ƒã€æš–æ°”åŠç‹¬ç«‹å«ç”Ÿé—´</li>
              <li>å›¾ä¹¦é¦†è—ä¹¦16ä¸‡å†Œï¼Œæ˜¯å…¨çœåœ°å¸‚å·ä¸­ç¬¬ä¸€å®¶"æ™®é€šä¸­å­¦è¾¾æ ‡å›¾ä¹¦é¦†"</li>
            </ul>`
          },
          {
            title: "å®¿èˆç®¡ç†",
            content: `<h3>ä½å®¿è§„å®š</h3>
            <p>å­¦æ ¡å®è¡Œå°é—­å¼ç®¡ç†ï¼Œå®¿èˆæ¯æ™š22:30ç†„ç¯ã€‚å­¦ç”Ÿéœ€éµå®ˆä»¥ä¸‹è§„å®šï¼š</p>
            <ol>
              <li>ä¿æŒå®¿èˆæ•´æ´ï¼Œæ¯æ—¥è½®å€¼æ‰“æ‰«</li>
              <li>ç¦æ­¢ä½¿ç”¨å¤§åŠŸç‡ç”µå™¨</li>
              <li>å¤–æ¥äººå‘˜éœ€ç™»è®°è®¿é—®</li>
            </ol>`
          }
        ]
      },
      {
        id: 2,
        title: "å­¦ä¹ èµ„æºå¯¼èˆª",
        sections: [
          {
            title: "å›¾ä¹¦é¦†æŒ‡å—",
            content: `<h3>å¼€æ”¾æ—¶é—´</h3>
            <p>å‘¨ä¸€è‡³å‘¨äº”ï¼š8:00-21:00<br>å‘¨æœ«ï¼š9:00-17:00</p>
            <h3>å€Ÿé˜…è§„åˆ™</h3>
            <ul>
              <li>å­¦ç”Ÿè¯å€Ÿä¹¦ï¼Œæ¯æ¬¡æœ€å¤š5æœ¬</li>
              <li>å€ŸæœŸ30å¤©ï¼Œå¯ç»­å€Ÿä¸€æ¬¡</li>
              <li>é€¾æœŸæ¯å¤©ç½šæ¬¾0.2å…ƒ</li>
            </ul>`
          }
        ]
      }
    ];
    
    // DOMå…ƒç´ 
    const contentSections = document.querySelectorAll('.content-section');
    const sidebar = document.getElementById('sidebar');
    const chapterButtons = document.getElementById('chapter-buttons');
    const chapterTitle = document.getElementById('chapter-title');
    const chapterContent = document.getElementById('chapter-content');
    const currentChapter = document.getElementById('current-chapter');
    const globalSearch = document.getElementById('globalSearch');
    const suggestionsBox = document.querySelector('.suggestions-box');
    
    // åˆå§‹åŒ–ç›®å½•æŒ‰é’®
    function initTocButtons() {
      chapters.forEach(chapter => {
        const button = document.createElement('button');
        button.className = 'nav-button glass-card';
        button.innerHTML = `
          <img src="assets/icons/chapter-${chapter.id}.png" alt="${chapter.title}">
          <span>${chapter.title}</span>
        `;
        button.onclick = () => loadChapter(chapter.id);
        chapterButtons.appendChild(button);
      });
    }
    
    // æ˜¾ç¤ºæŒ‡å®šåŒºåŸŸ
    function showSection(sectionId) {
      // æ›´æ–°é¢åŒ…å±‘å¯¼èˆª
      const sectionNames = {
        'home': 'é¦–é¡µ',
        'overview': 'æ€»ä½“ä»‹ç»',
        'toc': 'ç›®å½•',
        'map': 'æ ¡å›­åœ°å›¾',
        'chapter-container': 'ç« èŠ‚å†…å®¹',
        'credits': 'åˆ¶ä½œé¸£è°¢'
      };
      currentChapter.textContent = sectionNames[sectionId];
      
      // æ›´æ–°æ´»åŠ¨çŠ¶æ€
      contentSections.forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(sectionId).classList.add('active');
      sidebar.classList.remove('active');
      suggestionsBox.style.display = 'none';
      
      // æ›´æ–°åº•éƒ¨å¯¼èˆªçŠ¶æ€
      document.querySelectorAll('.bottom-nav .nav-item').forEach(item => {
        item.classList.remove('active');
      });
      if(sectionId === 'home') {
        document.querySelector('.bottom-nav .nav-item:nth-child(1)').classList.add('active');
      }
    }
    
    // åŠ è½½ç« èŠ‚å†…å®¹
    function loadChapter(chapterId) {
      const chapter = chapters.find(c => c.id === chapterId);
      if (!chapter) return;
      
      chapterTitle.textContent = chapter.title;
      chapterContent.innerHTML = chapter.sections[0].content;
      showSection('chapter-container');
      
      // ä¿å­˜é˜…è¯»è¿›åº¦
      localStorage.setItem('lastChapter', chapterId);
    }
    
    // æœç´¢åŠŸèƒ½
    globalSearch.addEventListener('input', function() {
      if (this.value.length > 1) {
        suggestionsBox.style.display = 'block';
      } else {
        suggestionsBox.style.display = 'none';
      }
    });
    
    // æ ¡å›­åœ°å›¾åŠŸèƒ½
    function activateAR() {
      if (navigator.geolocation) {
        alert('ARå¯¼èˆªå·²æ¿€æ´»ï¼è¯·ç§»åŠ¨è®¾å¤‡æŸ¥çœ‹å®æ™¯è·¯çº¿');
      } else {
        alert('æ‚¨çš„è®¾å¤‡ä¸æ”¯æŒARå¯¼èˆªåŠŸèƒ½');
      }
    }
    
    // ä¾§è¾¹æ äº¤äº’
    document.getElementById('sidebarToggle').onclick = () => {
      sidebar.classList.add('active');
    };
    document.getElementById('closeSidebar').onclick = () => {
      sidebar.classList.remove('active');
    };
    
    // ç›®å½•æ ‘äº¤äº’
    document.querySelectorAll('.chapter-tree a').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const chapterId = link.getAttribute('data-chapter');
        loadChapter(parseInt(chapterId));
      });
    });
    
    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    window.onload = () => {
      initTocButtons();
      
      // æ¢å¤ä¸Šæ¬¡é˜…è¯»è¿›åº¦
      const lastChapter = localStorage.getItem('lastChapter');
      if (lastChapter) {
        loadChapter(parseInt(lastChapter));
      }
      
      // ä¾§è¾¹æ ç‚¹å‡»å¤–éƒ¨å…³é—­
      document.addEventListener('click', (e) => {
        if (!sidebar.contains(e.target) && e.target.id !== 'sidebarToggle') {
          sidebar.classList.remove('active');
        }
      });
    };
  </script>
</body>
</html>